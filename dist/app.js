(()=>{"use strict";var e={656:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),i(64)},638:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={LEFT:4,RIGHT:6,TOP:8,BOTTOM:2}},841:(e,t,i)=>{function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;var n=i(930),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sizeX=n.STEPX,this.sizeY=n.STEPY,this.position=t.position,this.isFirst=!!t.isFirst&&t.isFirst,this.initializeComponents()}var t,i;return t=e,(i=[{key:"initializeComponents",value:function(){this.el=document.createElement("span"),this.el.className="block",this.el.style.width=this.sizeX+"px",this.el.style.height=this.sizeY+"px",this.isFirst?this.el.classList.add("is-first"):this.el.classList.add("is-body"),this._position={x:0,y:0},this.el.style.top=this.position.y+"px",this.el.style.left=this.position.x+"px"}},{key:"updatePosition",value:function(e){this._position=this.position,this.position=e,this.el.style.top=this.position.y+"px",this.el.style.left=this.position.x+"px"}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Block=s},831:(e,t,i)=>{function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Point=void 0;var n=i(930),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=document.createElement("span"),this.position={x:0,y:0},this.initializeComponents()}var t,i;return t=e,(i=[{key:"initializeComponents",value:function(){this.el.style.width=n.STEPX+"px",this.el.style.height=n.STEPY+"px",this.el.className="block mouse",this.updatePosition(),n._table.appendChild(this.el)}},{key:"updatePosition",value:function(){this.position={x:Math.round(Math.random()*(n.xDiv-1))*n.STEPX,y:Math.round(Math.random()*(n.yDiv-1))*n.STEPY},this.el.style.top=this.position.y+"px",this.el.style.left=this.position.x+"px",console.log(this.position)}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Point=s},900:(e,t,i)=>{function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0});var n,s=i(638),r=i(831),a=i(841),l=i(930),c=!1,u=function(){function e(t,i){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyboardControlEvent=function(e){switch(e.keyCode){case 37:o.direction!==s.default.RIGHT&&(o.direction=s.default.LEFT);break;case 38:o.direction!==s.default.BOTTOM&&(o.direction=s.default.TOP);break;case 39:o.direction!==s.default.LEFT&&(o.direction=s.default.RIGHT);break;case 40:o.direction!==s.default.TOP&&(o.direction=s.default.BOTTOM)}},this.keyboardEscEvent=function(e){27===e.keyCode&&(c||(n?o.pauseStop():o.pauseStart()))},this.level=i.level-1||1,this.state=t,this.initializeComponents()}var t,i;return t=e,(i=[{key:"initializeComponents",value:function(){void 0===n?n=!1:document.querySelectorAll(".block").forEach((function(e){return e.remove()})),this.mouse=new r.Point,document.querySelector("#level").innerHTML=l.Levels[this.level].title,this.direction=s.default.RIGHT,this.blocks=[new a.Block({position:{x:l.STEPX,y:l.STEPY},isFirst:!0})];for(var e=0;e<2*this.level;e++)this.blocks.push(new a.Block({position:{x:0,y:l.STEPY},range:e+1}))}},{key:"gameOver",value:function(){var e=this,t=document.querySelector("#gameOver-box"),i=document.querySelector("#yesBtn"),o=function(t){var i=t.keyCode;(!i||i&&32===i)&&(e.state.scores=0,e.initializeComponents(),e.start(),c=!1,n())},n=function(){t.classList.remove("animate__bounceIn"),t.classList.add("animate__bounceOut"),i.removeEventListener("click",o),document.body.removeEventListener("keydown",o)};this.stop(),document.body.removeEventListener("keydown",this.keyboardEscEvent),document.body.addEventListener("keydown",o),i.addEventListener("click",o),t.className="gb-visible animate__animated animate__bounceIn"}},{key:"walk",value:function(){var e=this,t=this.mouse.position.x===this.blocks[0].position.x,i=this.mouse.position.y===this.blocks[0].position.y;t&&i&&(this.increase(),this.mouse.updatePosition(),this.state.scores+=l.Levels[this.level].score),this.blocks.forEach((function(e){l._table.appendChild(e.el)})),this.blocks.forEach((function(t,i){var o;if(0===i)switch(e.direction){case s.default.LEFT:o={x:t.position.x-l.STEPX,y:t.position.y},e.blocks[0].el.style.transform="rotate(90deg)";break;case s.default.RIGHT:o={x:t.position.x+l.STEPX,y:t.position.y},e.blocks[0].el.style.transform="rotate(-90deg)";break;case s.default.TOP:o={x:t.position.x,y:t.position.y-l.STEPY},e.blocks[0].el.style.transform="rotate(180deg)";break;case s.default.BOTTOM:o={x:t.position.x,y:t.position.y+l.STEPY},e.blocks[0].el.style.transform="rotate(-360deg)"}else o={x:e.blocks[i-1]._position.x,y:e.blocks[i-1]._position.y};t.updatePosition(o)}))}},{key:"increase",value:function(){this.blocks.push(new a.Block({position:this.blocks[this.blocks.length-1]._position}))}},{key:"start",value:function(){this.launch(),this.play(),document.body.addEventListener("keydown",this.keyboardEscEvent)}},{key:"play",value:function(){var e=this;document.body.addEventListener("keydown",this.keyboardControlEvent),this.timer=setInterval((function(){var t=2*l.STEPX,i=2*l.STEPY,o=e.blocks[0].position.x+t,n=e.blocks[0].position.y+i,r=e.direction;if(o>=l.tableX&&r===s.default.RIGHT||o<=t&&r===s.default.LEFT||n>=l.tableY&&r===s.default.BOTTOM||n<=i&&r===s.default.TOP)e.gameOver();else{for(var a=!1,c=1;!a&&c<e.blocks.length;)a=e.blocks[c].position.x===e.blocks[0].position.x&&e.blocks[c].position.y===e.blocks[0].position.y,c++;a?e.gameOver():e.walk()}}),l.Levels[this.level].speed)}},{key:"pauseStop",value:function(){n=!1,document.querySelector("#pause-box").animate([{visibility:"visible",opacity:1},{visibility:"hidden",opacity:0}],{fill:"both",duration:300,easing:"ease-in"}),this.play()}},{key:"pauseStart",value:function(){n=!0,this.stop(),document.querySelector("#pause-box").animate([{visibility:"hidden",opacity:0},{visibility:"visible",opacity:1}],{fill:"both",duration:300,easing:"ease-in"})}},{key:"stop",value:function(){document.body.removeEventListener("keydown",this.keyboardControlEvent),clearInterval(this.timer)}},{key:"launch",value:function(){document.body.addEventListener("keydown",this.keyboardControlEvent)}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=u},216:(e,t)=>{function i(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scoreInternal=0,this.scoreDOM=document.querySelector(t),this.scoreListener=function(e){i.scoreDOM.innerHTML=e}}var t,o;return t=e,(o=[{key:"scores",get:function(){return this.scoreInternal},set:function(e){this.scoreInternal=e,this.scoreListener(e)}},{key:"registerScoreListener",value:function(e){this.scoreListener=e}}])&&i(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=o},930:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.yDiv=t.xDiv=t.STEPY=t.STEPX=t.tableY=t.tableX=t._table=t.Levels=t.Speed=void 0;var i={LOW:500,MEDIUM:300,FAST:200,FASTEST:100};t.Speed=i;var o=[{title:"Easy",speed:i.LOW,score:5},{title:"Normal",speed:i.MEDIUM,score:10},{title:"Hard",speed:i.FAST,score:15},{title:"Very Hard",speed:i.FASTEST,score:20}];t.Levels=o;var n=document.querySelector("#table");t._table=n;var s=n.clientWidth;t.tableX=s;var r=n.clientHeight;t.tableY=r,t.xDiv=40;var a=Math.floor(40*r/s);t.yDiv=a;var l=Math.floor(s/40);t.STEPX=l;var c=Math.floor(r/a);t.STEPY=c},64:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o});const o=i.p+"app.css"}},t={};function i(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,i),s.exports}i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e=i(900);i(656);var t=i(216);new e.default(new t.default("#score"),{level:parseInt(prompt("Entrez un niveau entre 1 et 4"))}).start()})()})();
//# sourceMappingURL=app.js.map